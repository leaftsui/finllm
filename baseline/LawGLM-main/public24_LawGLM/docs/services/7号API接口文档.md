## 7 号API接口函数 根据母公司的名称查询该公司投资的所有全资子公司信息list

``` 
@register_tool
def get_listed_all_sub_company_info_service_by_parent_company_name(parent_company_name: Annotated[str, "母公司全称", True],need_fields: Annotated[str, "需要返回的字段列表 例如 [关联上市公司全称,上市公司关系,上市公司参股比例]", True],money_threshold: Annotated[str, "母公司投资金额下界", True] = "0万",rank_name: Annotated[str, "排序字段", True] = "母公司参股比例") -> str:
    """
    根据母公司的名称查询该公司投资的所有全资子公司信息list。

    参数:
    parent_company_name -- 母公司全称，例如"天能电池集团股份有限公司"
    money_threshold -- 母公司投资金额下界，例如"8800.00万"，默认值为"0万"
    rank_name -- 排序字段，从小到大排列，例如"母公司参股比例"，默认值为"母公司参股比例"

    例如：
        输入：
        parent_company_name = "天能电池集团股份有限公司"
        输出：
        [{'母公司全称': '上海航天汽车机电股份有限公司', 
        '母公司关系': '子公司', 
        '母公司参股比例': '100.0', 
        '母公司投资金额': '8800.00万', 
        '全资子公司名称': '甘肃神舟光伏电力有限公司'}, 
        {'母公司全称': '上海航天汽车机电股份有限公司', 
        '母公司关系': '子公司', 
        '母公司参股比例': '100.0', 
        '母公司投资金额': '1.19亿', 
        '全资子公司名称': '甘肃张掖神舟光伏电力有限公司'}]
    """
    need_fields = keywords_parser(need_fields)
    
    rsp = get_listed_sub_company_info(query_conds={"关联上市公司全称": parent_company_name},need_fields=need_fields)
    new_list = []
    sum_money = 0
    if isinstance(rsp, dict):
        rsp = [rsp]
    for item in rsp:
        if '关联上市公司全称' in item:
            item['母公司全称'] = item.pop('关联上市公司全称')
        if '上市公司关系' in item:
            item['母公司关系'] = item.pop('上市公司关系')
        if '上市公司参股比例' in item:
            item['母公司参股比例'] = item.pop('上市公司参股比例')
        if '上市公司投资金额' in item and convert_to_float(item["上市公司投资金额"]):
            item['母公司投资金额'] = item.pop('上市公司投资金额')
        if '公司名称' in item:
            item['全资子公司名称'] = item.pop('公司名称')
        if item["母公司参股比例"] == '':
            item["母公司参股比例"]="0"
        if item["母公司投资金额"] == '':
            item["母公司投资金额"] = "0万"
        if convert_to_float(item["母公司投资金额"]) >= convert_to_float(money_threshold) and float(item["母公司参股比例"]) == 100 :
            new_list.append(item) 
        sum_money += convert_to_float(item["母公司投资金额"])
    if rank_name == "母公司投资金额":
        new_list = sorted(new_list, key=lambda x: convert_to_float(x["母公司投资金额"]), reverse=False)
    else:
        new_list = sorted(new_list, key=lambda x: float(x["母公司参股比例"]), reverse=False)
    json_str = json.dumps(new_list, ensure_ascii=False)
    json_str += f"\n子公司总数量：{len(new_list)}\n母公司投资金额总额{sum_money}"
    return json_str
``` 

### 例子： 
### 1
##### 输入
``` 
company_name='北京碧水源科技股份有限公司',need_fields=[]
``` 
#### 输出 
``` 
'{"公司名称": "北京碧水源科技股份有限公司", "公司简称": "碧水源", "英文名称": "Beijing Originwater Technology Co., Ltd.", "关联证券": "", "公司代码": "300070", "曾用简称": "", "所属市场": "深交所创业板", "所属行业": "生态保护和环境治理业", "成立日期": "2001-07-17", "上市日期": "2010-04-21", "法人代表": "文剑平", "总经理": "黄江龙", "董秘": "张兴", "邮政编码": "102206", "注册地址": "北京市海淀区生命科学园路23-2号碧水源大厦", "办公地址": "北京市海淀区生命科学园路23-2号碧水源大厦", "联系电话": "010-88465890、010-80768866", "传真": "010-88434847", "官方网址": "www.originwater.com", "电子邮箱": "IR@originwater.com", "入选指数": "创业板指,创业新兴,国证Ａ指,巨潮小盘,深成指R,深证300,深证成指,深证环保,深证新兴,央视50,中证500,中证央企", "主营业务": "从事污水处理与污水资源化技术的开发及应用。", "经营范围": "污水处理技术、污水资源化技术、水资源管理技术、水处理技术、固体废弃物处理技术、大气环境治理技术、生态工程技术、生态修复技术开发、技术推广、技术转让、技术咨询、技术服务、技术培训；施工总承包，专业承包；环境污染处理工程设计；建设工程项目管理；委托生产膜、膜组件、膜设备、给排水设备及配套产品；销售环境污染处理专用设备及材料、膜、膜组件、膜设备、给排水设备及配套产品；水务领域投资及投资管理；货物进出口、技术进出口、代理进出口。", "机构简介": "公司系由北京碧水源科技发展有限公司整体变更设立。2007年6月3日，经有限公司临时股东会决议，一致同意按经大信会计师事务有限公司审计的公司截至2007年4月30日账面净资产110,172,326.45元，取整11,000万元折股11,000万股，整体变更为股份公司，账面净资产未折股部分计入资本公积。2007年6月13日，公司取得了北京市工商行政管理局核发的整体变更为股份公司的企业法人营业执照，注册号：110108002972822，注册资本及实收资本均为11,000万元。", "每股面值": "1.0", "首发价格": "69.0", "首发募资净额": "243685.25", "首发主承销商": "第一创业证券有限责任公司"}'

```
### 2
#### 输入

{"公司简称": "海天精工","need_fields":["公司名称", "法人代表", "主营业务","办公地址","联系电话"] }
``` 
输出
'{"公司名称": "上海妙可蓝多食品科技股份有限公司", "法人代表": "柴琇", "主营业务": "以奶酪、液态奶为核心的特色乳制品的研发、生产和销售，同时公司也从事以奶粉、黄油为主的乳制品贸易业务。", "办公地址": "上海市浦东新区金桥路1398号金台大厦10楼", "联系电话": "021-50188700"}'
``` 


### 3
#### 输入
``` 
{"公司代码": "600882","need_fields":["公司名称", "公司简称", "主营业务","办公地址","联系电话"] }
``` 

#### 输出
``` 
{'公司名称': '上海妙可蓝多食品科技股份有限公司',
 '公司简称': '妙可蓝多',
 '主营业务': '以奶酪、液态奶为核心的特色乳制品的研发、生产和销售，同时公司也从事以奶粉、黄油为主的乳制品贸易业务。',
 '办公地址': '上海市浦东新区金桥路1398号金台大厦10楼',
 '联系电话': '021-50188700'}
``` 
